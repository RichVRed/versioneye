function reformatDate(e,t,r){return t=void 0!==t?t:"YYYY-MM-DD",r=void 0!==r?r:"dddd, Do MMMM",moment(e,t).format(r)}function getLanguageColor(e){var t={"default":"#333333",java:"#544FD6",ruby:"#DC143C",c:"#33A1C9","c++":"#104E8B","c#":"#00BFFF",groovy:"#006400",python:"#EE7600",r:"#8B7D6B",javascript:"#9ACD32","node.js":"#6B8E23",nodejs:"#6B8E23",php:"#8B6914",clojure:"#999999",rust:"#B7410E",chef:"#2C0091","objective-c":"#FF033E"},r=e.toLowerCase();return _.has(t,r)?t[r]:t["default"]}function renderSummaryPlot(e,t){var r=[],o=[],a=[];t.sort(function(e,t){return e.value<=t.value?1:-1}).forEach(function(e){r.push(e.name),o.push(e.value),a.push(getLanguageColor(e.name))});var n={labels:r,datasets:[{label:"Number of packages",data:o,backgroundColor:a}],options:{legend:{display:!1}}};new Chart(e,{type:"horizontalBar",data:n})}function renderTrendPlot(e,t){var r=[],o=_.keys(t[0]),a=_.reduce(o,function(e,t){return"date"!=t&&(e[t]=[]),e},{});t.forEach(function(e){r.push(reformatDate(e.date,"YYYY-MM-DD","YYYY.MM")),_.each(e,function(e,t){"date"!==t&&a[t].push(e)})});var n=[];_.each(a,function(e,t){n.push({label:t,data:e,borderColor:getLanguageColor(t),fill:!1})});var u={labels:r,datasets:n};new Chart(e,{type:"line",data:u})}jQuery(document).ready(function(){jQuery("#q").tbHinter({text:"json"});var e=document.location.origin;jQuery("#plot-summary").length&&(console.log("Going to render summary plot"),jQuery.getJSON(e+"/statistics/proglangs",function(e){renderSummaryPlot($("#plot-summary"),e)})),jQuery("#plot-trends").length&&(console.log("Going to render trends container"),jQuery.getJSON(e+"/statistics/langtrends",function(e){renderTrendPlot($("#plot-trends"),e)}))});