function reformatDate(e,t,o){return t=void 0!==t?t:"YYYY-MM-DD",o=void 0!==o?o:"dddd, Do MMMM",moment(e,t).format(o)}function getLanguageColor(e){var t={"default":"#333333",java:"#544FD6",ruby:"#DC143C",c:"#33A1C9","c++":"#104E8B","c#":"#00BFFF",groovy:"#006400",python:"#EE7600",r:"#8B7D6B",javascript:"#9ACD32","node.js":"#6B8E23",php:"#8B6914",clojure:"#999999"},o=e.toLowerCase();return _.has(t,o)?t[o]:t["default"]}function renderSummaryPlot(e,t){var o=[],r=[],a=[];t.sort(function(e,t){return e.value<=t.value?1:-1}).forEach(function(e){o.push(e.name),r.push(e.value),a.push(getLanguageColor(e.name))});var n={labels:o,datasets:[{label:"Number of packages",data:r,backgroundColor:a}],options:{legend:{display:!1}}};new Chart(e,{type:"horizontalBar",data:n})}function renderTrendPlot(e,t){var o=[],r={r:[],"C#":[],java:[],ruby:[],python:[],nodejs:[],php:[],clojure:[],"objective-c":[]};t.forEach(function(e){o.push(reformatDate(e.date,"YYYY-MM-DD","YYYY.MM")),_.each(e,function(e,t){"date"!==t&&r[t].push(e)})});var a=[];_.each(r,function(e,t){a.push({label:t,data:e,borderColor:getLanguageColor(t)})});var n={labels:o,datasets:a};new Chart(e,{type:"line",data:n})}jQuery(document).ready(function(){jQuery("#q").tbHinter({text:"json"});var e=document.location.origin;jQuery("#plot-summary").length&&(console.log("Going to render summary plot"),jQuery.getJSON(e+"/statistics/proglangs",function(e){renderSummaryPlot($("#plot-summary"),e)})),jQuery("#plot-trends").length&&(console.log("Going to render trends container"),jQuery.getJSON(e+"/statistics/langtrends",function(e){renderTrendPlot($("#plot-trends"),e)}))});